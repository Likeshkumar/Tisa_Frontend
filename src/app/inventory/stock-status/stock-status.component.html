<div class="main-content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header card-header-custom-red">
                        <div class="row">
                            <div class="col-sm-9">
                                <h4 class="card-title ">Track Card Requests</h4>
                            </div>
                            <div class="col-sm-3">
                            </div>
                        </div>
                    </div>

                    <div class="card-body" style="margin-top: 20px;">
                        <form>
                            <div class="row mt-3">
                                <div class="col-sm-3">
                                    <mat-form-field>
                                        <mat-select placeholder="Product" [(ngModel)]="productObj"
                                            [ngModelOptions]="{standalone: true}">
                                            <mat-select-filter placeholder="Search" [displayMember]="'productCode'"
                                                [array]="productlist" (filteredReturn)="filteredList1 = $event">
                                            </mat-select-filter>
                                            <mat-option *ngFor="let item of filteredList1" [value]="item">
                                                {{ item.productCode }} - {{ item.productDesc }}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>

                                <div class="col-sm-3">
                                    <!-- <mat-form-field>
                                        <mat-select placeholder="Branch" [(ngModel)]="branchObj"
                                            [ngModelOptions]="{standalone: true}">
                                            <mat-select-filter placeholder="Search" [displayMember]="'branchCode'"
                                                [array]="branchlist" (filteredReturn)="filteredList2 = $event">
                                            </mat-select-filter>
                                            <mat-option value="all">All</mat-option>
                                            <mat-option *ngFor="let item of filteredList2" [value]="item">
                                                {{ item.branchCode }} - {{ item.branchName }}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field> -->
                                    <mat-form-field>
                                        <mat-select placeholder="Branch" [(ngModel)]="branchObj"
                                            [disabled]="isBranchDropdownDisabled" [ngModelOptions]="{standalone: true}">

                                            <mat-select-filter placeholder="Search" [displayMember]="'branchCode'"
                                                [array]="branchlist" (filteredReturn)="filteredList2 = $event">
                                            </mat-select-filter>
                                            <mat-option value="all">All</mat-option>
                                            <mat-option *ngFor="let item of filteredList2" [value]="item">
                                                {{ item.branchCode }} - {{ item.branchName }}
                                            </mat-option>

                                        </mat-select>
                                    </mat-form-field>
                                </div>

                                <div class="col-sm-2">
                                    <button mat-raised-button color="primary" style="margin-left: 100px;"
                                        (click)="getFilterRecordList()" [disabled]="!isFilterValid()">
                                        <mat-icon>view_list</mat-icon>&nbsp;Retrieve
                                    </button>
                                </div>
                            </div>
                        </form>
                        <br>


                        <div class="row alignTable" *ngIf="showrecords">
                            <div class="col-lg-6">
                                <h5 class="headerWeight">Total selected: {{selection?.selected?.length}}</h5>
                            </div>
                            <div class="col-md-6">
                                <mat-form-field appearance="outline">
                                    <mat-label>Filter</mat-label>
                                    <input (keyup)="applyFilter($event)" matInput placeholder="Ex.Customer Name" #input>
                                    <mat-icon matSuffix>search</mat-icon>
                                </mat-form-field>
                            </div>
                            <div class="col-md-12 mat-elevation-z12">
                                <div class="example-container">
                                    <mat-checkbox hidden [checked]="selection.hasValue() && isSelectedPage()">all in
                                        this page</mat-checkbox>
                                    <table mat-table [dataSource]="dataSource">

                                        <ng-container matColumnDef="prodCode">
                                            <th mat-header-cell *matHeaderCellDef> Product </th>
                                            <td mat-cell *matCellDef="let element"> {{element.prodCode}} -
                                                {{element.prdDesc}} </td>
                                        </ng-container>

                                        <ng-container matColumnDef="branchCode">
                                            <th mat-header-cell *matHeaderCellDef> Branch </th>
                                            <td mat-cell *matCellDef="let element"> {{element.branchCode}} -
                                                {{element.branchName}} </td>
                                        </ng-container>

                                        <ng-container matColumnDef="chnCount">
                                            <th mat-header-cell *matHeaderCellDef> CHN Count </th>
                                            <td mat-cell *matCellDef="let element"> {{element.chnCount}}
                                            </td>
                                        </ng-container>

                                        <ng-container matColumnDef="reqUser">
                                            <th mat-header-cell *matHeaderCellDef> Req User </th>
                                            <td mat-cell *matCellDef="let element"> {{element.reqUser}}
                                            </td>
                                        </ng-container>

                                        <ng-container matColumnDef="reqDate">
                                            <th mat-header-cell *matHeaderCellDef> Req Date </th>
                                            <td mat-cell *matCellDef="let element"> {{element.reqDate}}
                                            </td>
                                        </ng-container>

                                        <ng-container matColumnDef="authUser">
                                            <th mat-header-cell *matHeaderCellDef> Auth User </th>
                                            <td mat-cell *matCellDef="let element"> {{element.authUser}}
                                            </td>
                                        </ng-container>

                                        <ng-container matColumnDef="authDao">
                                            <th mat-header-cell *matHeaderCellDef> Auth Date </th>
                                            <td mat-cell *matCellDef="let element"> {{element.authDao}}
                                            </td>
                                        </ng-container>

                                        <ng-container matColumnDef="deadLine">
                                            <th mat-header-cell *matHeaderCellDef> Expected Date </th>
                                            <td mat-cell *matCellDef="let element"> {{element.deadLine}} </td>
                                        </ng-container>

                                        <ng-container matColumnDef="seveity">
                                            <th mat-header-cell *matHeaderCellDef> Seveity </th>
                                            <td mat-cell *matCellDef="let element"> {{element.seveity}} </td>
                                        </ng-container>

                                        <!-- <ng-container matColumnDef="status">
                                            <th mat-header-cell *matHeaderCellDef> Status </th>
                                            <td mat-cell *matCellDef="let element"> {{element.status}} </td>
                                        </ng-container> -->

                                        <ng-container matColumnDef="status">
                                            <th mat-header-cell *matHeaderCellDef> Status </th>
                                            <td mat-cell *matCellDef="let element" [ngStyle]="{
                                             'color': element.status === 'Approved' ? 'green' :
                                               element.status === 'Rejected' ? 'red' :
                                                element.status === 'Pending' ? 'blue' : 'black'
                                                    }">
                                                {{element.status}}
                                            </td>
                                        </ng-container>


                                        <ng-container matColumnDef="remarks">
                                            <th mat-header-cell *matHeaderCellDef> Remarks </th>
                                            <td mat-cell *matCellDef="let element"> {{element.remarks}} </td>
                                        </ng-container>

                                        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                                        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                                        <tr class="mat-row" *matNoDataRow>
                                            <td class="mat-cell" colspan="9">No Records Found !!!!
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                <mat-paginator [pageSizeOptions]="[10, 20, 30, 40, 50]" showFirstLastButtons
                                    aria-label="Select page of periodic elements">
                                </mat-paginator>
                            </div>
                        </div>
                        <br>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>