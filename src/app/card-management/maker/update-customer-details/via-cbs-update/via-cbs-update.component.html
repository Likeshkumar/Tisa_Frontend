<div class="main-content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header card-header-custom-red">
                        <div class="row">
                            <div class="col-sm-9">
                                <h4 class="card-title">Update Customer Details - VIA CBS</h4>
                                <p class="card-category"></p>
                            </div>
                            <div class="col-sm-3">
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <br>
                        <div class="row">
                            <div class="col-md-9">
                                <mat-radio-group [(ngModel)]="selectedOption" (ngModelChange)="onSelectionChange()">
                                    <!-- <mat-radio-button value="account" class="radio-spacing">Account
                                        Number</mat-radio-button> -->
                                    <!-- <mat-radio-button value="customerName" class="radio-spacing">Customer
                                        Name</mat-radio-button> -->
                                    <mat-radio-button value="customerId" class="radio-spacing">Customer
                                        ID</mat-radio-button>
                                    <mat-radio-button value="cardNumber" class="radio-spacing">Card
                                        Number</mat-radio-button>
                                </mat-radio-group>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4" *ngIf="selectedOption">
                                <mat-form-field appearance="fill">
                                    <mat-label>{{ getLabelForSelection(selectedOption) }}</mat-label>
                                    <input matInput [(ngModel)]="userInput"
                                        [placeholder]="getPlaceholderForSelection(selectedOption)"
                                        [minlength]="getMinLengthForSelection(selectedOption)"
                                        [maxlength]="getMaxLengthForSelection(selectedOption)"
                                        [pattern]="getPatternForSelection(selectedOption)" required
                                        #inputModel="ngModel">
                                    <mat-error *ngIf="inputModel.invalid && inputModel.touched">
                                        {{ getErrorMessage(inputModel, selectedOption) }}
                                    </mat-error>
                                </mat-form-field>
                            </div>

                            <div class="col-md-12 d-flex justify-content-end" *ngIf="selectedOption && userInput"
                                [disabled]="!userInput">
                                <button mat-raised-button color="primary" style="margin-top: 20px;"
                                    (click)="retrieveData()">
                                    <mat-icon>view_list</mat-icon>&nbsp;Retrieve
                                </button>
                            </div>
                        </div>

                    </div>
                    <!-- <div class="card-body">
                        <br>
                        <div class="row">
                            <div class="col-md-6">
                                <mat-form-field appearance="fill">
                                    <mat-label>Account Number</mat-label>
                                    <input matInput [(ngModel)]="accountNumber" maxlength="16" minlength="16"
                                        pattern="^\d{16}$" #cardNoInput="ngModel">
                                    <mat-error *ngIf="cardNoInput.hasError('required')">
                                        Account Number is required.
                                    </mat-error>
                                    <mat-error
                                        *ngIf="cardNoInput.hasError('minlength') || cardNoInput.hasError('maxlength')">
                                        Account Number must be 16 digits.
                                    </mat-error>
                                    <mat-error *ngIf="cardNoInput.hasError('pattern')">
                                        Account Number must contain only numbers.
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-xs-12 col-md-6">
                                <button mat-raised-button color="primary" style="margin-top: 20px;margin-left: 50px;"
                                    (click)="search()"><mat-icon>view_list</mat-icon>&nbsp;Retrieve</button>
                            </div>
                        </div>
                    </div> -->
                </div>
                <div class="card-body" *ngIf="showCardDetails">
                    <div class="row">
                        <div class="col-md-12">
                            <mat-stepper linear #stepper>
                                <mat-step [stepControl]="thirdFormGroup" label="Customer Level Information">
                                    <form [formGroup]="thirdFormGroup">
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <mat-form-field>
                                                    <mat-label>Customer Id</mat-label>
                                                    <input matInput minlength="6" maxlength="6"
                                                        formControlName="customerId" readonly>
                                                </mat-form-field>
                                            </div>

                                            <div class="col-sm-4">
                                                <mat-form-field class="example-full-width">
                                                    <mat-label>Gender</mat-label>
                                                    <mat-select formControlName="gender" disabled>
                                                        <mat-option value="M">Male</mat-option>
                                                        <mat-option value="F">Female</mat-option>
                                                        <mat-option value="O">Others</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-sm-4">
                                                <mat-form-field>
                                                    <mat-label>Customer Name</mat-label>
                                                    <input matInput formControlName="embossingName"
                                                        placeholder="Customer Name" readonly>
                                                    <mat-error
                                                        *ngIf="thirdFormGroup.controls['embossingName'].hasError('required')">
                                                        Customer Name cannot be blank and Name is required
                                                    </mat-error>
                                                    <mat-error
                                                        *ngIf="thirdFormGroup.controls['embossingName'].hasError('maxlength')">
                                                        Customer Name cannot exceed 25 characters.
                                                    </mat-error>
                                                    <mat-error
                                                        *ngIf="thirdFormGroup.controls['embossingName'].hasError('pattern')">
                                                        alphabets only allowed.
                                                    </mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-sm-4">
                                                <mat-form-field>
                                                    <mat-label>Date of Birth</mat-label>
                                                    <input matInput [matDatepicker]="picker3"
                                                        formControlName="dateofBirth" readonly>
                                                    <mat-hint>MM/DD/YYYY</mat-hint>
                                                    <mat-datepicker-toggle matSuffix
                                                        [for]="picker3"></mat-datepicker-toggle>
                                                    <mat-datepicker #picker3></mat-datepicker>
                                                    <mat-error
                                                        *ngIf="thirdFormGroup.controls['dateofBirth'].hasError('invalidDate')">
                                                        Date of Birth must be in the past
                                                    </mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-sm-4">
                                                <mat-form-field>
                                                    <mat-label>Mother / Spouse Name</mat-label>
                                                    <input matInput formControlName="motherName"
                                                        placeholder="Mother / Spouse Name" readonly>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div>
                                            <button mat-button matStepperPrevious>Back</button>
                                            <button mat-button matStepperNext>Next</button>
                                        </div>
                                    </form>
                                </mat-step>
                                <mat-step [stepControl]="fourthFormGroup" label="Contact Information">

                                    <form [formGroup]="fourthFormGroup">

                                        <h5 style="font-weight: bold;">Mailing Address</h5>

                                        <div class="row">

                                            <div class="col-sm-4">
                                                <mat-form-field>
                                                    <mat-label>Address Line 1</mat-label>
                                                    <input matInput formControlName="mailaddressline1"
                                                        placeholder="Ex. 1 Main St, New York, NY" readonly>
                                                    <mat-error
                                                        *ngIf="fourthFormGroup.controls['mailaddressline1'].hasError('maxlength')">
                                                        Address cannot exceed 35 characters.
                                                    </mat-error>
                                                    <mat-error
                                                        *ngIf="fourthFormGroup.controls['mailaddressline1'].hasError('pattern')">
                                                        Address can only include letters, numbers, spaces, commas,
                                                        periods,
                                                        hyphens, slashes, and apostrophes.
                                                    </mat-error>
                                                </mat-form-field>
                                            </div>

                                            <div class="col-sm-4">
                                                <mat-form-field>
                                                    <mat-label>Address Line 2</mat-label>
                                                    <input matInput formControlName="mailaddressline2"
                                                        placeholder="Ex. 1 Main St, New York, NY" readonly>
                                                    <mat-error
                                                        *ngIf="fourthFormGroup.controls['mailaddressline2'].hasError('maxlength')">
                                                        Address cannot exceed 35 characters.
                                                    </mat-error>
                                                    <mat-error
                                                        *ngIf="fourthFormGroup.controls['mailaddressline2'].hasError('pattern')">
                                                        Address can only include letters, numbers, spaces, commas,
                                                        periods,
                                                        hyphens, slashes, and apostrophes.
                                                    </mat-error>
                                                </mat-form-field>
                                            </div>

                                            <div class="col-sm-4">
                                                <mat-form-field>
                                                    <mat-label>City</mat-label>
                                                    <input matInput formControlName="mailcity" placeholder="City"
                                                        readonly>
                                                </mat-form-field>
                                            </div>

                                            <div class="col-sm-4">
                                                <mat-form-field>
                                                    <mat-label>Country</mat-label>
                                                    <input matInput formControlName="mailcountry" placeholder="Country"
                                                        readonly>
                                                </mat-form-field>
                                            </div>

                                            <div class="col-sm-4">
                                                <mat-form-field>
                                                    <mat-label>Mobile No</mat-label>
                                                    <input matInput type="tel" formControlName="mobNo"
                                                        placeholder="Mobile No" maxlength="9" readonly>
                                                    <mat-error *ngIf="fourthFormGroup.invalid">
                                                        Enter the Numbers only
                                                    </mat-error>
                                                    <mat-error *ngIf="fourthFormGroup.get('mobNo').hasError('pattern')">
                                                        Enter exactly 9 Numbers
                                                    </mat-error>
                                                    <mat-error
                                                        *ngIf="fourthFormGroup.get('mobNo').hasError('required')">
                                                        Mobile No is required
                                                    </mat-error>
                                                </mat-form-field>
                                            </div>

                                            <div class="col-sm-4">
                                                <mat-form-field>
                                                    <mat-label>Email Id</mat-label>
                                                    <input matInput type="email" formControlName="emailId"
                                                        placeholder="Email Id" readonly>
                                                    <mat-error *ngIf="fourthFormGroup.get('emailId').hasError('email')">
                                                        Please enter a valid email address
                                                    </mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <ng-template matStepLabel>Contact Information</ng-template>
                                        <div>
                                            <button mat-button matStepperPrevious>Back</button>
                                            <button mat-button matStepperNext>Next</button>
                                        </div>
                                    </form>
                                </mat-step>
                                <mat-step>
                                    <ng-template matStepLabel>Done</ng-template>
                                    <p>Please review the details and click Submit to proceed</p>
                                    <div>
                                        <button mat-button matStepperPrevious>Back</button>
                                        <button mat-button (click)="updateCustomerEntry()">Submit</button>
                                    </div>
                                </mat-step>
                            </mat-stepper>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>